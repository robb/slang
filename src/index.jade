doctype 5
html
  head
    meta(charset="utf8")
    script(src = "/slang.js", type = "text/javascript")
    link(href = "http://fonts.googleapis.com/css?family=Droid+Sans:700", rel = "stylesheet", type = "text/css")

    style
      body {
        margin: 0
        width:  100%;
        height: 100%;

        background-image: url('./img/broken_noise.png');

        font-family: "Droid Sans", "Helvetica", sans;
      }

      #dropzone {
        position: fixed;
        top:      0;
        right:    0;
        bottom:   0;
        left:     0;

        display: -webkit-box;
        display: -moz-box;
        display: box;

        -webkit-box-orient: horizontal;
        -moz-box-orient:    horizontal;
        box-orient:         horizontal;

        -webkit-box-pack: center;
        -moz-box-pack:    center;
        box-pack:         center;

        -webkit-box-align:  center;
        -moz-box-align:     center;
        box-align:          center;

        background-size:     cover;
        background-position: center;
      }

      #instructions {
        text-align:  center;
        font-weight: 700;
        font-size:   60px;

        color:       #FFF;
        text-shadow: 0 1px 0   rgba(0, 0, 0, 0.5),
                     0 0   3px rgba(0, 0, 0, 0.5);
      }

      #footer {
        height:    15px;

        position: absolute;
        right:    10px;
        bottom:   10px;
        left:     10px;

        font-size:   15px;
        color:       #FFF;
        text-shadow: 0 2px 1px rgba(0, 0, 0, 0.5),
                     0 0   3px rgba(0, 0, 0, 0.3);

        opacity: 0.7;
      }
  body
    #dropzone
      #instructions Drag an image here

      #footer
        | Built by Robert Böhnke – inspired by Rev Dan Catt's flambient

    script(type = "text/javascript")
      var slang = new Slang('#result');

      try {
        var dropzone     = document.querySelector('#dropzone'),
            instructions = document.querySelector('#instructions');

        dropzone.addEventListener("dragover", function(event) {
          event.preventDefault();
        }, true);

        dropzone.addEventListener('drop', function(e) {
          var reader = new FileReader();

          reader.onload = function(event) {
            instructions.innerHTML = "Processing…";

            slang.process(event.target.result, function(data) {
              dropzone.style.backgroundImage = "url(" + data + ")";

              instructions.innerHTML = "Finished";
            });
          };

          reader.readAsDataURL(e.dataTransfer.files[0]);

          e.preventDefault();
        }, true);
      } catch (e) {

      }
